const Discord = require('discord.js');
let xp = require('../xp.json');

module.exports = {
  name: 'level',
  category: 'Utils',
  description: 'UNDEFINED',
  callback: async ({ message, args, client }) => {
    if (!xp[message.author.id]) {
      xp[message.author.id] = {
        xp: 0,
        level: 1,
      };
    }
    let curxp = xp[message.author.id].xp;
    let curlvl = xp[message.author.id].level;
    let nxtLvlXp = curlvl * 300;
    let difference = nxtLvlXp - curxp;

    let lvlEmbed = new Discord.MessageEmbed()
      .setAuthor(message.author.username)
      .setColor('#d604cf')
      .addField('Nível', curlvl, true)
      .addField('XP', curxp, true)
      .setFooter(
        `${difference} XPs restantes para upar de nível`,
        message.author.displayAvatarURL
      );

    message.channel.send(lvlEmbed);
  },
};
